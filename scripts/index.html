<html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<title>Flutter webapp test</title>
<style>
  body {
    font-family: sans-serif;
    font-size: 20px;
  }
</style>

<body>
  <p>
    <a href='#' id='test-token'>Show FCM token</a>
  </p>
  <p>
    <a href='#' id='test-geo'>Geolocation test</a>
  </p>
  <p>
    <a href='#' id='test-barcode'>QR scan test</a>
  </p>
  <p>
    <a href='#' id='test-content'>Google search</a>
  </p>
  <pre id='debug-output'></pre>
  <script>
    var debugOutput = document.getElementById('debug-output');

    // Firebase messaging token callback

    window.onFcmToken = function (token) {
      debugOutput.innerText = token;
    };

    // QR scanner callbacks

    window.onBarcodeData = function (data) {
      debugOutput.innerText = data;
    };

    window.onBarcodeError = function (message) {
      debugOutput.innerText = message;
    };

    // Example implementation

    (function init() {
      document.getElementById('test-token').addEventListener('click', function (e) {
        Native.postMessage('fcmToken');
      });

      document.getElementById('test-geo').addEventListener('click', function (e) {
        navigator.geolocation.getCurrentPosition(function (pos) {
          var s = 'Lat ' + pos.coords.latitude + '\n';
          s += 'Lon ' + pos.coords.longitude;
          debugOutput.innerText = s;
        });
      });

      document.getElementById('test-barcode').addEventListener('click', function (e) {
        Native.postMessage('scanBarcode');
      });

      document.getElementById('test-content').addEventListener('click', function (e) {
        window.location = 'https://www.google.com';
      });
    })();

  </script>
</body>

</html>